<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ›å»ºè§’è‰² - PULSAR</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
            <i class="fas fa-cube"></i>
            <span>PULSAR</span>
        </div>
        </div>
        
        <div class="sidebar-content">
        <nav class="nav-menu">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-project-diagram"></i><span>é¡¹ç›®ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="project-list.html" class="nav-item"><span>é¡¹ç›®åˆ—è¡¨</span></a>
                    <a href="project-detail.html" class="nav-item"><span>é¡¹ç›®è¯¦æƒ…</span></a>
                    <a href="plan-management.html" class="nav-item"><span>æ–¹æ¡ˆç®¡ç†</span></a>
                </div>
            </div>
            <a href="case-management.html" class="nav-item"><i class="fas fa-images"></i><span>æ™ºèƒ½æ¡ˆä¾‹ç®¡ç†</span></a>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-sitemap"></i><span>å‰å°ç±»ç›®ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="frontend-category-domestic.html" class="nav-item"><span>å›½å†…å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-category-international.html" class="nav-item"><span>å›½é™…å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-category-guide.html" class="nav-item"><span>æ™ºèƒ½å¯¼è´­å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-layout.html" class="nav-item"><span>æ™ºèƒ½å¯¼è´­å¸ƒå±€ç®¡ç†</span></a>
                </div>
            </div>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-file-alt"></i><span>å†…å®¹ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="content-template.html" class="nav-item"><span>å†…å®¹æ¨¡ç‰ˆç®¡ç†</span></a>
                    <a href="content-management.html" class="nav-item"><span>å†…å®¹ç®¡ç†</span></a>
                    <a href="panorama-management.html" class="nav-item"><span>å…¨æ™¯å›¾ç®¡ç†</span></a>
                    <a href="3d-product.html" class="nav-item"><span>3Dçˆ†å“æ£šæ‹</span></a>
                </div>
            </div>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-bullhorn"></i><span>è¥é”€ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="ad-management.html" class="nav-item"><span>å¹¿å‘Šä½ç®¡ç†</span></a>
                    <a href="product-pool.html" class="nav-item"><span>é€‰å“æ± ç®¡ç†</span></a>
                    <a href="content-pool.html" class="nav-item"><span>å†…å®¹æ± ç®¡ç†</span></a>
                    <a href="promotion-management.html" class="nav-item"><span>ä¼˜æƒ ç®¡ç†</span></a>
                </div>
            </div>
            <a href="data-dashboard.html" class="nav-item"><i class="fas fa-chart-line"></i><span>æ•°æ®çœ‹æ¿</span></a>
        </nav>
        
        <div class="nav-divider">åŸºç¡€æ¨¡å—</div>
        
        <nav class="nav-menu">
            <a href="enterprise-management.html" class="nav-item">
                <i class="fas fa-building"></i>
                <span>ä¼ä¸šç®¡ç†</span>
            </a>
            <a href="model-management.html" class="nav-item">
                <i class="fas fa-box"></i>
                <span>æ¨¡å‹ç®¡ç†</span>
            </a>
            <a href="product-management.html" class="nav-item">
                <i class="fas fa-shopping-cart"></i>
                <span>å•†å“ç®¡ç†</span>
            </a>
            <a href="backend-category.html" class="nav-item">
                <i class="fas fa-folder-tree"></i>
                <span>åå°ç±»ç›®</span>
            </a>
            <a href="attribute-management.html" class="nav-item">
                <i class="fas fa-tags"></i>
                <span>å±æ€§ç®¡ç†</span>
            </a>
            
            <!-- æƒé™ç®¡ç† -->
            <div class="nav-group">
                <div class="nav-group-title">
                    <i class="fas fa-shield-alt"></i>
                    <span>æƒé™ç®¡ç†</span>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="nav-group-items">
                    <a href="menu-management.html" class="nav-item">
                        <span>èœå•ç®¡ç†</span>
                    </a>
                    <a href="role-management.html" class="nav-item active">
                        <span>è§’è‰²ç®¡ç†</span>
                    </a>
                    <a href="policy-management.html" class="nav-item">
                        <span>ç­–ç•¥ç®¡ç†</span>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="nav-divider">ä¸ªäººä¸­å¿ƒ</div>
        
        <nav class="nav-menu">
            <a href="my-benefits.html" class="nav-item"><i class="fas fa-gift"></i><span>æƒç›Šç®¡ç†</span></a>
            <a href="my-profile.html" class="nav-item"><i class="fas fa-user"></i><span>ä¸ªäººä¿¡æ¯</span></a>
            <a href="my-uploads.html" class="nav-item"><i class="fas fa-cloud-upload-alt"></i><span>æˆ‘çš„ä¸Šä¼ </span></a>
        </nav>
        
        </div>
        
        <div class="sidebar-footer">
            <div class="user-profile">
            <img src="https://work.alibaba-inc.com/photo/482399.jpg" alt="User Avatar" class="user-avatar">
            <div class="user-info">
                <div class="user-name">æ™´å²™</div>
                <div class="user-email">qingao.zxt@alibaba-inc.com</div>
            </div>
        </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- é¡¶éƒ¨æ  -->
        <header class="top-bar">
            <h1 class="page-title">åˆ›å»ºè§’è‰²</h1>
            <div class="top-bar-actions">
                <button class="btn-secondary" onclick="window.location.href='role-management.html'">
                    <i class="fas fa-arrow-left"></i>
                    è¿”å›åˆ—è¡¨
                </button>
            </div>
        </header>

        <!-- è¡¨å•å†…å®¹ -->
        <section class="content-section">
            <div class="form-container">
                <form id="roleForm">
                    <div class="form-section">
                        <h3 class="section-title">åŸºæœ¬ä¿¡æ¯</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="required">è§’è‰²åç§°</label>
                                <input type="text" class="form-control" placeholder="è¯·è¾“å…¥è§’è‰²åç§°" required>
                            </div>
                            <div class="form-group">
                                <label class="required">è§’è‰²ç¼–ç </label>
                                <input type="text" class="form-control" placeholder="ä¾‹å¦‚ï¼šADMIN" required>
                            </div>
                            <div class="form-group full-width">
                                <label>æè¿°</label>
                                <textarea class="form-control" rows="3" placeholder="è¯·è¾“å…¥è§’è‰²æè¿°"></textarea>
                            </div>
                            <div class="form-group">
                                <label>çŠ¶æ€</label>
                                <select class="form-control">
                                    <option value="1">å¯ç”¨</option>
                                    <option value="0">ç¦ç”¨</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">æƒé™é…ç½®</h3>
                        <div class="permission-tree">
                            <div class="permission-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="group-checkbox"> <strong>åŸºç¡€æ¨¡å—</strong>
                                </label>
                                <div class="permission-items">
                                    <label class="checkbox-label">
                                        <input type="checkbox"> ä¼ä¸šç®¡ç†
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> æ¨¡å‹ç®¡ç†
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> å•†å“ç®¡ç†
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> åå°ç±»ç›®
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> å±æ€§ç®¡ç†
                                    </label>
                                </div>
                            </div>
                            <div class="permission-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="group-checkbox"> <strong>é¡¹ç›®ç®¡ç†</strong>
                                </label>
                                <div class="permission-items">
                                    <label class="checkbox-label">
                                        <input type="checkbox"> é¡¹ç›®åˆ—è¡¨
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> æ–¹æ¡ˆç®¡ç†
                                    </label>
                                </div>
                            </div>
                            <div class="permission-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" class="group-checkbox"> <strong>æƒé™ç®¡ç†</strong>
                                </label>
                                <div class="permission-items">
                                    <label class="checkbox-label">
                                        <input type="checkbox"> èœå•ç®¡ç†
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> è§’è‰²ç®¡ç†
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox"> ç­–ç•¥ç®¡ç†
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i>
                            ä¿å­˜
                        </button>
                        <button type="button" class="btn-secondary" onclick="window.location.href='role-management.html'">
                            å–æ¶ˆ
                        </button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <script src="js/main.js"></script>
    <script>
        // æƒé™ç®¡ç†èœå•ä¸“ç”¨ä¿®å¤è„šæœ¬ - è¦†ç›– main.js çš„è¡Œä¸º
        (function() {
            console.log('ğŸ”§ æƒé™ç®¡ç†èœå•ä¿®å¤è„šæœ¬å¯åŠ¨');
            
            // ç­‰å¾… DOM å®Œå…¨åŠ è½½
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initPermissionMenu);
            } else {
                initPermissionMenu();
            }
            
            function initPermissionMenu() {
                console.log('âœ… å¼€å§‹ä¿®å¤æƒé™ç®¡ç†èœå•');
                
                // æ‰¾åˆ°æ‰€æœ‰èœå•ç»„
                const navGroups = document.querySelectorAll('.nav-group');
                console.log(`æ‰¾åˆ° ${navGroups.length} ä¸ªèœå•ç»„`);
                
                // è·å–å½“å‰é¡µé¢
                const currentPath = window.location.pathname;
                const currentFileName = currentPath.split('/').pop() || 'index.html';
                console.log(`å½“å‰é¡µé¢: ${currentFileName}`);
                
                navGroups.forEach((group, index) => {
                    const title = group.querySelector('.nav-group-title');
                    if (!title) return;
                    
                    const titleText = title.textContent.trim();
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯å½“å‰é¡µé¢æ‰€åœ¨çš„èœå•ç»„
                    const items = group.querySelectorAll('.nav-group-items .nav-item');
                    let isCurrentGroup = false;
                    
                    items.forEach(item => {
                        const href = item.getAttribute('href');
                        if (href === currentFileName) {
                            isCurrentGroup = true;
                            item.classList.add('active');
                        }
                    });
                    
                    // è‡ªåŠ¨å±•å¼€å½“å‰é¡µé¢æ‰€åœ¨çš„èœå•ç»„
                    if (isCurrentGroup) {
                        group.classList.add('active');
                        console.log(`âœ“ è‡ªåŠ¨å±•å¼€: ${titleText}`);
                    }
                    
                    // ç§»é™¤æ‰€æœ‰æ—§çš„äº‹ä»¶ç›‘å¬å™¨
                    const newTitle = title.cloneNode(true);
                    title.parentNode.replaceChild(newTitle, title);
                    
                    // æ·»åŠ æ–°çš„ç‚¹å‡»äº‹ä»¶
                    newTitle.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const currentGroup = this.closest('.nav-group');
                        if (currentGroup) {
                            const wasActive = currentGroup.classList.contains('active');
                            currentGroup.classList.toggle('active');
                            console.log(`${titleText}: ${wasActive ? 'æ”¶èµ·' : 'å±•å¼€'}`);
                        }
                    });
                    
                    console.log(`âœ“ ${titleText} äº‹ä»¶ç»‘å®šå®Œæˆ`);
                });
                
                console.log('âœ… æƒé™ç®¡ç†èœå•ä¿®å¤å®Œæˆ');
            }
        })();
    </script>
    <script>
        document.getElementById('roleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('è§’è‰²ä¿å­˜æˆåŠŸï¼');
            window.location.href = 'role-management.html';
        });

        // åˆ†ç»„å¤é€‰æ¡†å…¨é€‰åŠŸèƒ½
        document.querySelectorAll('.group-checkbox').forEach(groupCb => {
            groupCb.addEventListener('change', function() {
                const items = this.closest('.permission-group').querySelectorAll('.permission-items input[type="checkbox"]');
                items.forEach(item => item.checked = this.checked);
            });
        });
    </script>
</body>
</html>
