<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­–ç•¥ç®¡ç† - PULSAR</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
            <i class="fas fa-cube"></i>
            <span>PULSAR</span>
        </div>
        </div>
        
        <div class="sidebar-content">
        <nav class="nav-menu">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-project-diagram"></i><span>é¡¹ç›®ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="project-list.html" class="nav-item"><span>é¡¹ç›®åˆ—è¡¨</span></a>
                    <a href="project-detail.html" class="nav-item"><span>é¡¹ç›®è¯¦æƒ…</span></a>
                    <a href="plan-management.html" class="nav-item"><span>æ–¹æ¡ˆç®¡ç†</span></a>
                </div>
            </div>
            <a href="case-management.html" class="nav-item"><i class="fas fa-images"></i><span>æ™ºèƒ½æ¡ˆä¾‹ç®¡ç†</span></a>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-sitemap"></i><span>å‰å°ç±»ç›®ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="frontend-category-domestic.html" class="nav-item"><span>å›½å†…å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-category-international.html" class="nav-item"><span>å›½é™…å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-category-guide.html" class="nav-item"><span>æ™ºèƒ½å¯¼è´­å±•ç¤ºç›®å½•</span></a>
                    <a href="frontend-layout.html" class="nav-item"><span>æ™ºèƒ½å¯¼è´­å¸ƒå±€ç®¡ç†</span></a>
                </div>
            </div>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-file-alt"></i><span>å†…å®¹ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="content-template.html" class="nav-item"><span>å†…å®¹æ¨¡ç‰ˆç®¡ç†</span></a>
                    <a href="content-management.html" class="nav-item"><span>å†…å®¹ç®¡ç†</span></a>
                    <a href="panorama-management.html" class="nav-item"><span>å…¨æ™¯å›¾ç®¡ç†</span></a>
                    <a href="3d-product.html" class="nav-item"><span>3Dçˆ†å“æ£šæ‹</span></a>
                </div>
            </div>
            <div class="nav-group">
                <div class="nav-group-title"><i class="fas fa-bullhorn"></i><span>è¥é”€ç®¡ç†</span><i class="fas fa-chevron-down toggle-icon"></i></div>
                <div class="nav-group-items">
                    <a href="ad-management.html" class="nav-item"><span>å¹¿å‘Šä½ç®¡ç†</span></a>
                    <a href="product-pool.html" class="nav-item"><span>é€‰å“æ± ç®¡ç†</span></a>
                    <a href="content-pool.html" class="nav-item"><span>å†…å®¹æ± ç®¡ç†</span></a>
                    <a href="promotion-management.html" class="nav-item"><span>ä¼˜æƒ ç®¡ç†</span></a>
                </div>
            </div>
            <a href="data-dashboard.html" class="nav-item"><i class="fas fa-chart-line"></i><span>æ•°æ®çœ‹æ¿</span></a>
        </nav>
        
        <div class="nav-divider">åŸºç¡€æ¨¡å—</div>
        
        <nav class="nav-menu">
            <a href="enterprise-management.html" class="nav-item">
                <i class="fas fa-building"></i>
                <span>ä¼ä¸šç®¡ç†</span>
            </a>
            <a href="model-management.html" class="nav-item">
                <i class="fas fa-box"></i>
                <span>æ¨¡å‹ç®¡ç†</span>
            </a>
            <a href="product-management.html" class="nav-item">
                <i class="fas fa-shopping-cart"></i>
                <span>å•†å“ç®¡ç†</span>
            </a>
            <a href="backend-category.html" class="nav-item">
                <i class="fas fa-folder-tree"></i>
                <span>åå°ç±»ç›®</span>
            </a>
            <a href="attribute-management.html" class="nav-item">
                <i class="fas fa-tags"></i>
                <span>å±æ€§ç®¡ç†</span>
            </a>
            
            <!-- æƒé™ç®¡ç† -->
            <div class="nav-group">
                <div class="nav-group-title">
                    <i class="fas fa-shield-alt"></i>
                    <span>æƒé™ç®¡ç†</span>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="nav-group-items">
                    <a href="menu-management.html" class="nav-item">
                        <span>èœå•ç®¡ç†</span>
                    </a>
                    <a href="role-management.html" class="nav-item">
                        <span>è§’è‰²ç®¡ç†</span>
                    </a>
                    <a href="policy-management.html" class="nav-item active">
                        <span>ç­–ç•¥ç®¡ç†</span>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="nav-divider">ä¸ªäººä¸­å¿ƒ</div>
        
        <nav class="nav-menu">
            <a href="my-benefits.html" class="nav-item"><i class="fas fa-gift"></i><span>æƒç›Šç®¡ç†</span></a>
            <a href="my-profile.html" class="nav-item"><i class="fas fa-user"></i><span>ä¸ªäººä¿¡æ¯</span></a>
            <a href="my-uploads.html" class="nav-item"><i class="fas fa-cloud-upload-alt"></i><span>æˆ‘çš„ä¸Šä¼ </span></a>
        </nav>
        
        </div>
        
        <div class="sidebar-footer">
            <div class="user-profile">
            <img src="https://work.alibaba-inc.com/photo/482399.jpg" alt="User Avatar" class="user-avatar">
            <div class="user-info">
                <div class="user-name">æ™´å²™</div>
                <div class="user-email">qingao.zxt@alibaba-inc.com</div>
            </div>
        </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
        <!-- é¡¶éƒ¨æ  -->
        <header class="top-bar">
            <h1 class="page-title">ç­–ç•¥ç®¡ç†</h1>
            <div class="top-bar-actions">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="æœç´¢ç­–ç•¥åç§°...">
                </div>
            </div>
        </header>

        <!-- æ“ä½œæ  -->
        <section class="action-bar">
            <div class="action-left">
                <button class="btn-primary" onclick="window.location.href='policy-create.html'">
                    <i class="fas fa-plus"></i>
                    æ–°å»ºç­–ç•¥
                </button>
                <button class="btn-secondary" id="batchDeleteBtn" disabled>
                    <i class="fas fa-trash"></i>
                    æ‰¹é‡åˆ é™¤
                </button>
            </div>
            <div class="action-right">
                <button class="btn-secondary">
                    <i class="fas fa-filter"></i>
                    ç­›é€‰
                </button>
                <button class="btn-secondary">
                    <i class="fas fa-download"></i>
                    å¯¼å‡º
                </button>
            </div>
        </section>

        <!-- æ•°æ®è¡¨æ ¼ -->
        <section class="content-section">
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th width="50"><input type="checkbox" id="selectAll"></th>
                            <th>ç­–ç•¥åç§°</th>
                            <th>ç­–ç•¥ç±»å‹</th>
                            <th>é€‚ç”¨ä¼ä¸šç±»å‹</th>
                            <th>ä¼˜å…ˆçº§</th>
                            <th>çŠ¶æ€</th>
                            <th>åˆ›å»ºæ—¶é—´</th>
                            <th width="150">æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox" class="row-checkbox"></td>
                            <td><strong>å¹³å°ä¼ä¸šå…¨æƒé™ç­–ç•¥</strong></td>
                            <td><span class="badge badge-primary">å…¨å±€ç­–ç•¥</span></td>
                            <td>å¹³å°ä¼ä¸š</td>
                            <td>1</td>
                            <td><span class="badge badge-success">å¯ç”¨</span></td>
                            <td>2024-01-15</td>
                            <td>
                                <button class="btn-icon" onclick="window.location.href='policy-create.html?id=1'" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" onclick="deletePolicy(1)" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="row-checkbox"></td>
                            <td><strong>å“ç‰Œä¼ä¸šåŸºç¡€æƒé™</strong></td>
                            <td><span class="badge badge-info">ä¼ä¸šç­–ç•¥</span></td>
                            <td>å“ç‰Œä¼ä¸š</td>
                            <td>2</td>
                            <td><span class="badge badge-success">å¯ç”¨</span></td>
                            <td>2024-01-15</td>
                            <td>
                                <button class="btn-icon" onclick="window.location.href='policy-create.html?id=2'" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" onclick="deletePolicy(2)" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="row-checkbox"></td>
                            <td><strong>ç»é”€å•†é™åˆ¶ç­–ç•¥</strong></td>
                            <td><span class="badge badge-warning">é™åˆ¶ç­–ç•¥</span></td>
                            <td>ç»é”€å•†ä¼ä¸š</td>
                            <td>3</td>
                            <td><span class="badge badge-success">å¯ç”¨</span></td>
                            <td>2024-01-15</td>
                            <td>
                                <button class="btn-icon" onclick="window.location.href='policy-create.html?id=3'" title="ç¼–è¾‘">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" onclick="deletePolicy(3)" title="åˆ é™¤">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- åˆ†é¡µ -->
            <div class="pagination">
                <button class="btn-secondary btn-sm" disabled>ä¸Šä¸€é¡µ</button>
                <span class="pagination-info">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
                <button class="btn-secondary btn-sm" disabled>ä¸‹ä¸€é¡µ</button>
            </div>
        </section>
    </main>

    <script src="js/main.js"></script>
    <script>
        // æƒé™ç®¡ç†èœå•ä¸“ç”¨ä¿®å¤è„šæœ¬ - è¦†ç›– main.js çš„è¡Œä¸º
        (function() {
            console.log('ğŸ”§ æƒé™ç®¡ç†èœå•ä¿®å¤è„šæœ¬å¯åŠ¨');
            
            // ç­‰å¾… DOM å®Œå…¨åŠ è½½
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initPermissionMenu);
            } else {
                initPermissionMenu();
            }
            
            function initPermissionMenu() {
                console.log('âœ… å¼€å§‹ä¿®å¤æƒé™ç®¡ç†èœå•');
                
                // æ‰¾åˆ°æ‰€æœ‰èœå•ç»„
                const navGroups = document.querySelectorAll('.nav-group');
                console.log(`æ‰¾åˆ° ${navGroups.length} ä¸ªèœå•ç»„`);
                
                // è·å–å½“å‰é¡µé¢
                const currentPath = window.location.pathname;
                const currentFileName = currentPath.split('/').pop() || 'index.html';
                console.log(`å½“å‰é¡µé¢: ${currentFileName}`);
                
                navGroups.forEach((group, index) => {
                    const title = group.querySelector('.nav-group-title');
                    if (!title) return;
                    
                    const titleText = title.textContent.trim();
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯å½“å‰é¡µé¢æ‰€åœ¨çš„èœå•ç»„
                    const items = group.querySelectorAll('.nav-group-items .nav-item');
                    let isCurrentGroup = false;
                    
                    items.forEach(item => {
                        const href = item.getAttribute('href');
                        if (href === currentFileName) {
                            isCurrentGroup = true;
                            item.classList.add('active');
                        }
                    });
                    
                    // è‡ªåŠ¨å±•å¼€å½“å‰é¡µé¢æ‰€åœ¨çš„èœå•ç»„
                    if (isCurrentGroup) {
                        group.classList.add('active');
                        console.log(`âœ“ è‡ªåŠ¨å±•å¼€: ${titleText}`);
                    }
                    
                    // ç§»é™¤æ‰€æœ‰æ—§çš„äº‹ä»¶ç›‘å¬å™¨
                    const newTitle = title.cloneNode(true);
                    title.parentNode.replaceChild(newTitle, title);
                    
                    // æ·»åŠ æ–°çš„ç‚¹å‡»äº‹ä»¶
                    newTitle.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const currentGroup = this.closest('.nav-group');
                        if (currentGroup) {
                            const wasActive = currentGroup.classList.contains('active');
                            currentGroup.classList.toggle('active');
                            console.log(`${titleText}: ${wasActive ? 'æ”¶èµ·' : 'å±•å¼€'}`);
                        }
                    });
                    
                    console.log(`âœ“ ${titleText} äº‹ä»¶ç»‘å®šå®Œæˆ`);
                });
                
                console.log('âœ… æƒé™ç®¡ç†èœå•ä¿®å¤å®Œæˆ');
            }
        })();
    </script>
    <script>
        // å…¨é€‰åŠŸèƒ½
        document.getElementById('selectAll').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(cb => cb.checked = this.checked);
            updateBatchDeleteBtn();
        });

        // æ›´æ–°æ‰¹é‡åˆ é™¤æŒ‰é’®çŠ¶æ€
        function updateBatchDeleteBtn() {
            const checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
            document.getElementById('batchDeleteBtn').disabled = checkedCount === 0;
        }

        document.querySelectorAll('.row-checkbox').forEach(cb => {
            cb.addEventListener('change', updateBatchDeleteBtn);
        });

        // åˆ é™¤ç­–ç•¥
        function deletePolicy(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç­–ç•¥å—ï¼Ÿ')) {
                alert('ç­–ç•¥å·²åˆ é™¤');
            }
        }
    </script>
</body>
</html>
